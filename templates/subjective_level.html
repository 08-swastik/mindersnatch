{% load static %}
<!DOCTYPE html>

<head>
    <title>Subjective - Mindersnatch</title>
    <link rel="stylesheet" href="{% static 'subjective.css' %}">
</head>

<body>
    <p style="font-family: Ubuntu;">{{ sitn.text }}</p>
    {% block msgblock %}
    {% if messages %}
    {% for message in messages %}
    <div class="alert {% if message.tags %} alert-{% if message.tags == "error" %}danger{% else %}{{ message.tags }}{% endif %}"{% endif %} role="alert">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endblock %}
    <p id="timer" hidden>{{ timepassed }}</p>
    <small id="hours">00</small>:<small id="minutes">00</small>:<small id="seconds">00</small>
    <form id="ans" method="post" action="{% url 'situation' %}">
        {% csrf_token %}
        <input type="text" name="ans" class="question" id="nme" required autocomplete="off" />
        <label for="nme"><span>Your answer</span></label>
        <input type="submit" value="Submit!" />
    </form>
</body>

<script>
    var minutesLabel = document.getElementById("minutes");
    var secondsLabel = document.getElementById("seconds");
    var hoursLabel = document.getElementById("hours");
    var totalSeconds = parseInt(document.getElementById("timer").innerText);
    setInterval(setTime, 1000);

    function setTime() {
        ++totalSeconds;
        secondsLabel.innerHTML = pad(totalSeconds % 60);
        minutesLabel.innerHTML = pad(parseInt(totalSeconds / 60) % 60);
        hoursLabel.innerHTML = pad(parseInt(totalSeconds / 3600));
    }

    function pad(val) {
        var valString = val + "";
        if (valString.length < 2) {
            return "0" + valString;
        } else {
            return valString;
        }
    }
</script>